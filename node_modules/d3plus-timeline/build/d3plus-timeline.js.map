{"version":3,"file":"d3plus-timeline.js","sources":["../src/Timeline.js"],"sourcesContent":["/**\n    @external Axis\n    @see https://github.com/d3plus/d3plus-axis#Axis\n*/\n\nimport {brushX} from \"d3-brush\";\nimport {event} from \"d3-selection\";\n\nimport {Axis, date} from \"d3plus-axis\";\nimport {attrize, closest, elem} from \"d3plus-common\";\n\n/**\n    @class Timeline\n    @extends external:Axis\n*/\nexport default class Timeline extends Axis {\n\n  /**\n      @memberof Timeline\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Axis.\n      @private\n  */\n  constructor() {\n\n    super();\n\n    this._brushing = true;\n    this._brushFilter = () => !event.button && event.detail < 2;\n    this._domain = [2001, 2010];\n    this._gridSize = 0;\n    this._handleConfig = {\n      fill: \"#444\"\n    };\n    this._handleSize = 6;\n    this._height = 100;\n    this._on = {};\n    this.orient(\"bottom\");\n    this._scale = \"time\";\n    this._selectionConfig = {\n      \"fill\": \"#777\",\n      \"stroke-width\": 0\n    };\n    this._shape = \"Rect\";\n    this._shapeConfig = Object.assign({}, this._shapeConfig, {\n      height: d => d.tick ? 10 : 0,\n      width: d => d.tick ? this._domain.map(t => date(t).getTime()).includes(d.id) ? 2 : 1 : 0\n    });\n    this._snapping = true;\n\n  }\n\n  /**\n      @memberof Timeline\n      @desc Triggered on brush \"brush\".\n      @private\n  */\n  _brushBrush() {\n\n    if (event.sourceEvent && event.sourceEvent.offsetX && event.selection !== null && (!this._brushing || this._snapping)) {\n\n      const domain = (this._brushing ? event.selection\n        : [event.selection[0], event.selection[0]])\n        .map(this._d3Scale.invert)\n        .map(Number);\n\n      const ticks = this._availableTicks.map(Number);\n      domain[0] = date(closest(domain[0], ticks));\n      domain[1] = date(closest(domain[1], ticks));\n\n      const single = +domain[0] === +domain[1];\n\n      this._selection = single ? domain[0] : domain;\n\n      const pixelDomain = domain.map(this._d3Scale);\n\n      if (single) {\n        pixelDomain[0] -= 0.1;\n        pixelDomain[1] += 0.1;\n      }\n\n      this._brushGroup.call(this._brush.move, pixelDomain);\n\n    }\n\n    this._brushStyle();\n    if (this._on.brush) this._on.brush(this._selection);\n\n  }\n\n  /**\n      @memberof Timeline\n      @desc Triggered on brush \"end\".\n      @private\n  */\n  _brushEnd() {\n\n    if (!event.sourceEvent) return; // Only transition after input.\n\n    const domain = (event.selection && this._brushing ? event.selection\n      : [event.sourceEvent.offsetX, event.sourceEvent.offsetX])\n      .map(this._d3Scale.invert)\n      .map(Number);\n\n    const ticks = this._availableTicks.map(Number);\n    domain[0] = date(closest(domain[0], ticks));\n    domain[1] = date(closest(domain[1], ticks));\n\n    const single = +domain[0] === +domain[1];\n\n    if (this._brushing || !this._snapping) {\n\n      const pixelDomain = domain.map(this._d3Scale);\n\n      if (single) {\n        pixelDomain[0] -= 0.1;\n        pixelDomain[1] += 0.1;\n      }\n\n      this._brushGroup.transition(this._transition).call(this._brush.move, pixelDomain);\n\n    }\n\n    this._brushStyle();\n    this._selection = single ? domain[0] : domain;\n    if (this._on.end) this._on.end(this._selection);\n\n  }\n\n  /**\n      @memberof Timeline\n      @desc Triggered on brush \"start\".\n      @private\n  */\n  _brushStart() {\n\n    if (event.sourceEvent !== null && (!this._brushing || this._snapping)) {\n\n      const domain = (event.selection && this._brushing ? event.selection\n        : [event.sourceEvent.offsetX, event.sourceEvent.offsetX])\n        .map(this._d3Scale.invert)\n        .map(Number);\n\n      const ticks = this._availableTicks.map(Number);\n      domain[0] = date(closest(domain[0], ticks));\n      domain[1] = date(closest(domain[1], ticks));\n\n      const single = +domain[0] === +domain[1];\n\n      const pixelDomain = domain.map(this._d3Scale);\n\n      if (single) {\n        pixelDomain[0] -= 0.1;\n        pixelDomain[1] += 0.1;\n      }\n\n      this._brushGroup.call(this._brush.move, pixelDomain);\n\n    }\n\n    this._brushStyle();\n    if (this._on.start) this._on.start();\n\n  }\n\n  /**\n      @memberof Timeline\n      @desc Overrides the default brush styles.\n      @private\n  */\n  _brushStyle() {\n\n    const {height} = this._position;\n    const timelineHeight = this._shape === \"Circle\"\n      ? typeof this._shapeConfig.r === \"function\" ? this._shapeConfig.r({tick: true}) * 2 : this._shapeConfig.r\n      : this._shape === \"Rect\"\n        ? typeof this._shapeConfig[height] === \"function\" ? this._shapeConfig[height]({tick: true}) : this._shapeConfig[height]\n        : this._tickSize;\n\n    this._brushGroup.selectAll(\".overlay\")\n      .attr(\"cursor\", this._brushing ? \"crosshair\" : \"pointer\");\n\n    this._brushGroup.selectAll(\".selection\")\n      .call(attrize, this._selectionConfig)\n      .attr(\"height\", timelineHeight);\n\n    this._brushGroup.selectAll(\".handle\")\n      .call(attrize, this._handleConfig)\n      .attr(\"height\", timelineHeight + this._handleSize);\n\n  }\n\n  /**\n      @memberof Timeline\n      @desc Draws the timeline.\n      @param {Function} [*callback* = undefined]\n      @chainable\n  */\n  render(callback) {\n\n    super.render(callback);\n\n    const {height, y} = this._position;\n\n    const offset = this._outerBounds[y],\n          range = this._d3Scale.range();\n\n    const brush = this._brush = brushX()\n      .extent([[range[0], offset], [range[1], offset + this._outerBounds[height]]])\n      .filter(this._brushFilter)\n      .handleSize(this._handleSize)\n      .on(\"start\", this._brushStart.bind(this))\n      .on(\"brush\", this._brushBrush.bind(this))\n      .on(\"end\", this._brushEnd.bind(this));\n\n    const latest = this._availableTicks[this._availableTicks.length - 1];\n    const selection = (this._selection === void 0 ? [latest, latest]\n      : this._selection instanceof Array\n        ? this._selection.slice()\n        : [this._selection, this._selection])\n      .map(date)\n      .map(this._d3Scale);\n\n    if (selection[0] === selection[1]) {\n      selection[0] -= 0.1;\n      selection[1] += 0.1;\n    }\n\n    this._brushGroup = elem(\"g.brushGroup\", {parent: this._group});\n    this._brushGroup.call(brush).transition(this._transition)\n      .call(brush.move, selection);\n\n    this._outerBounds.y -= this._handleSize / 2;\n    this._outerBounds.height += this._handleSize / 2;\n\n    return this;\n\n  }\n\n  /**\n      @memberof Timeline\n      @desc If *value* is specified, toggles the brushing value and returns the current class instance. If *value* is not specified, returns the current brushing value.\n      @param {Boolean} [*value* = true]\n      @chainable\n  */\n  brushing(_) {\n    return arguments.length ? (this._brushing = _, this) : this._brushing;\n  }\n\n  /**\n      @memberof Timeline\n      @desc If *value* is specified, sets the brush event filter and returns the current class instance. If *value* is not specified, returns the current brush event filter.\n      @param {Function} [*value*]\n      @chainable\n      @example\nfunction() {\n  return !event.button && event.detail < 2;\n}\n  */\n  brushFilter(_) {\n    return arguments.length ? (this._brushFilter = _, this) : this._brushFilter;\n  }\n\n  /**\n      @memberof Timeline\n      @desc If *value* is specified, sets the handle style and returns the current class instance. If *value* is not specified, returns the current handle style.\n      @param {Object} [*value*]\n      @chainable\n  */\n  handleConfig(_) {\n    return arguments.length ? (this._handleConfig = Object.assign(this._handleConfig, _), this) : this._handleConfig;\n  }\n\n  /**\n      @memberof Timeline\n      @desc If *value* is specified, sets the handle size and returns the current class instance. If *value* is not specified, returns the current handle size.\n      @param {Number} [*value* = 6]\n      @chainable\n  */\n  handleSize(_) {\n    return arguments.length ? (this._handleSize = _, this) : this._handleSize;\n  }\n\n  /**\n      @memberof Timeline\n      @desc Adds or removes a *listener* for the specified brush event *typename*. If a *listener* is not specified, returns the currently-assigned listener for the specified event *typename*. Mirrors the core [d3-brush](https://github.com/d3/d3-brush#brush_on) behavior.\n      @param {String|Object} [*typename*]\n      @param {Function} [*listener*]\n      @chainable\n  */\n  on(_, f) {\n    return arguments.length === 2 ? (this._on[_] = f, this) : arguments.length ? typeof _ === \"string\" ? this._on[_] : (this._on = Object.assign({}, this._on, _), this) : this._on;\n  }\n\n  /**\n      @memberof Timeline\n      @desc If *value* is specified, sets the selection style and returns the current class instance. If *value* is not specified, returns the current selection style.\n      @param {Object} [*value*]\n      @chainable\n  */\n  selectionConfig(_) {\n    return arguments.length ? (this._selectionConfig = Object.assign(this._selectionConfig, _), this) : this._selectionConfig;\n  }\n\n  /**\n      @memberof Timeline\n      @desc If *value* is specified, sets the selection and returns the current class instance. If *value* is not specified, returns the current selection. Defaults to the most recent year in the timeline.\n      @param {Array|Date|Number|String} [*value*]\n      @chainable\n  */\n  selection(_) {\n    return arguments.length ? (this._selection = _, this) : this._selection;\n  }\n\n  /**\n      @memberof Timeline\n      @desc If *value* is specified, toggles the snapping value and returns the current class instance. If *value* is not specified, returns the current snapping value.\n      @param {Boolean} [*value* = true]\n      @chainable\n  */\n  snapping(_) {\n    return arguments.length ? (this._snapping = _, this) : this._snapping;\n  }\n\n}\n"],"names":["super","event","this","date","const","closest","attrize","brushX","elem","Axis"],"mappings":"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"}