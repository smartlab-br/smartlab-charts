{"version":3,"file":"_drawColorScale.js","sources":["../../src/_drawColorScale.js"],"sourcesContent":["import {elem} from \"d3plus-common\";\n\n/**\n    @function _drawColorScale\n    @desc Renders the color scale if this._colorScale is not falsy.\n    @param {Array} data The filtered data array to be displayed.\n    @private\n*/\nexport default function(data = []) {\n\n  if (this._colorScale && data) {\n\n    const position = this._colorScalePosition || \"bottom\";\n    const wide = [\"top\", \"bottom\"].includes(position);\n\n    const transform = {\n      opacity: this._colorScalePosition ? 1 : 0,\n      transform: `translate(${wide ? this._margin.left + this._padding.left : this._margin.left}, ${wide ? this._margin.top : this._margin.top + this._padding.top})`\n    };\n\n    const showColorScale = this._colorScale && data && data.length > 1;\n\n    const scaleGroup = elem(\"g.d3plus-viz-colorScale\", {\n      condition: showColorScale && !this._colorScaleConfig.select,\n      enter: transform,\n      parent: this._select,\n      transition: this._transition,\n      update: transform\n    }).node();\n\n    const scaleData = data.filter((d, i) => {\n      const c = this._colorScale(d, i);\n      return c !== undefined && c !== null;\n    });\n\n    if (showColorScale) {\n      this._colorScaleClass\n        .align({bottom: \"end\", left: \"start\", right: \"end\", top: \"start\"}[position] || \"bottom\")\n        .duration(this._duration)\n        .data(scaleData)\n        .height(wide ? this._height - (this._margin.bottom + this._margin.top) : this._height - (this._margin.bottom + this._margin.top + this._padding.bottom + this._padding.top))\n        .orient(position)\n        .select(scaleGroup)\n        .value(this._colorScale)\n        .width(wide ? this._width - (this._margin.left + this._margin.right + this._padding.left + this._padding.right) : this._width - (this._margin.left + this._margin.right))\n        .config(this._colorScaleConfig)\n        .render();\n\n      const scaleBounds = this._colorScaleClass.outerBounds();\n      if (this._colorScalePosition && !this._colorScaleConfig.select && scaleBounds.height) {\n        if (wide) this._margin[position] += scaleBounds.height + this._legendClass.padding() * 2;\n        else this._margin[position] += scaleBounds.width + this._legendClass.padding() * 2;\n      }\n\n    }\n    else {\n      this._colorScaleClass.config(this._colorScaleConfig);\n    }\n\n  }\n\n}\n"],"names":["const","this"],"mappings":"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"}