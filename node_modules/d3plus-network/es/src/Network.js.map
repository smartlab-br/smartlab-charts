{"version":3,"file":"Network.js","sources":["../../src/Network.js"],"sourcesContent":["/**\n    @external Viz\n    @see https://github.com/d3plus/d3plus-viz#Viz\n*/\n\nimport {extent, mean, min, merge} from \"d3-array\";\nimport {nest} from \"d3-collection\";\n// import {forceSimulation} from \"d3-force\";\nimport * as scales from \"d3-scale\";\nimport {zoomTransform} from \"d3-zoom\";\n\nimport {accessor, assign, configPrep, constant, elem} from \"d3plus-common\";\nimport * as shapes from \"d3plus-shape\";\nimport {dataLoad as load, Viz} from \"d3plus-viz\";\n\n/**\n    @class Network\n    @extends external:Viz\n    @desc Creates a network visualization based on a defined set of nodes and edges. [Click here](http://d3plus.org/examples/d3plus-network/getting-started/) for help getting started using the Network class.\n*/\nexport default class Network extends Viz {\n\n  /**\n      @memberof Network\n      @desc Invoked when creating a new class instance, and sets any default parameters.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._labelCutoff = 100;\n    this._links = [];\n    this._noDataMessage = false;\n    this._nodes = [];\n    this._on[\"click.shape\"] = (d, i) => {\n\n      this._tooltipClass.data([]).render();\n\n      if (this._hover && this._drawDepth >= this._groupBy.length - 1) {\n\n        if (this._focus && this._focus === d.id) {\n\n          this.active(false);\n          this._on.mouseenter.bind(this)(d, i);\n\n          this._focus = undefined;\n          this._zoomToBounds(null);\n\n        }\n        else {\n\n          this.hover(false);\n\n          const id = this._nodeGroupBy && this._nodeGroupBy[this._drawDepth](d, i) ? this._nodeGroupBy[this._drawDepth](d, i) : this._id(d, i),\n                links = this._linkLookup[id],\n                node = this._nodeLookup[id];\n\n          const filterIds = [node.id];\n          let xDomain = [node.x - node.r, node.x + node.r],\n              yDomain = [node.y - node.r, node.y + node.r];\n\n          links.forEach(l => {\n            filterIds.push(l.id);\n            if (l.x - l.r < xDomain[0]) xDomain[0] = l.x - l.r;\n            if (l.x + l.r > xDomain[1]) xDomain[1] = l.x + l.r;\n            if (l.y - l.r < yDomain[0]) yDomain[0] = l.y - l.r;\n            if (l.y + l.r > yDomain[1]) yDomain[1] = l.y + l.r;\n          });\n\n          this.active((h, x) => {\n            if (h.source && h.target) return h.source.id === node.id || h.target.id === node.id;\n            else return filterIds.includes(this._ids(h, x)[this._drawDepth]);\n          });\n\n          this._focus = d.id;\n          const t = zoomTransform(this._container.node());\n          xDomain = xDomain.map(d => d * t.k + t.x);\n          yDomain = yDomain.map(d => d * t.k + t.y);\n          this._zoomToBounds([[xDomain[0], yDomain[0]], [xDomain[1], yDomain[1]]]);\n\n        }\n\n      }\n\n    };\n    this._on[\"click.legend\"] = (d, i) => {\n\n      const ids = this._id(d);\n      let id = this._ids(d);\n      id = id[id.length - 1];\n\n      if (this._hover && this._drawDepth >= this._groupBy.length - 1) {\n\n        if (this._focus && this._focus === ids) {\n\n          this.active(false);\n          this._on.mouseenter.bind(this)(d, i);\n\n          this._focus = undefined;\n          this._zoomToBounds(null);\n\n        }\n        else {\n\n          this.hover(false);\n\n          const nodes = ids.map(id => this._nodeLookup[id]);\n\n          const filterIds = [id];\n          let xDomain = [nodes[0].x - nodes[0].r, nodes[0].x + nodes[0].r],\n              yDomain = [nodes[0].y - nodes[0].r, nodes[0].y + nodes[0].r];\n\n          nodes.forEach(l => {\n            filterIds.push(l.id);\n            if (l.x - l.r < xDomain[0]) xDomain[0] = l.x - l.r;\n            if (l.x + l.r > xDomain[1]) xDomain[1] = l.x + l.r;\n            if (l.y - l.r < yDomain[0]) yDomain[0] = l.y - l.r;\n            if (l.y + l.r > yDomain[1]) yDomain[1] = l.y + l.r;\n          });\n\n          this.active((h, x) => {\n            if (h.source && h.target) return filterIds.includes(h.source.id) && filterIds.includes(h.target.id);\n            else {\n              const myIds = this._ids(h, x);\n              return filterIds.includes(myIds[myIds.length - 1]);\n            }\n          });\n\n          this._focus = ids;\n          const t = zoomTransform(this._container.node());\n          xDomain = xDomain.map(d => d * t.k + t.x);\n          yDomain = yDomain.map(d => d * t.k + t.y);\n          this._zoomToBounds([[xDomain[0], yDomain[0]], [xDomain[1], yDomain[1]]]);\n\n        }\n\n        this._on[\"mousemove.legend\"].bind(this)(d, i);\n\n      }\n\n    };\n    this._sizeMin = 5;\n    this._sizeScale = \"sqrt\";\n    this._shape = constant(\"Circle\");\n    this._shapeConfig = assign(this._shapeConfig, {\n      ariaLabel: (d, i) => {\n        const validSize = this._size ? `, ${this._size(d, i)}` : \"\";\n        return `${this._drawLabel(d, i)}${validSize}.`;\n      },\n      labelConfig: {\n        duration: 0,\n        fontMin: 1,\n        fontResize: true,\n        labelPadding: 0,\n        textAnchor: \"middle\",\n        verticalAlign: \"middle\"\n      },\n      Path: {\n        fill: \"none\",\n        label: false,\n        stroke: \"#eee\",\n        strokeWidth: 1\n      }\n    });\n    this._x = accessor(\"x\");\n    this._y = accessor(\"y\");\n\n    this._zoom = true;\n\n  }\n\n  /**\n      Extends the draw behavior of the abstract Viz class.\n      @private\n  */\n  _draw(callback) {\n\n    super._draw(callback);\n\n    const height = this._height - this._margin.top - this._margin.bottom,\n          transform = `translate(${this._margin.left}, ${this._margin.top})`,\n          transition = this._transition,\n          width = this._width - this._margin.left - this._margin.right;\n\n    const data = this._filteredData.reduce((obj, d, i) => {\n      obj[this._id(d, i)] = d;\n      return obj;\n    }, {});\n\n    let nodes = this._nodes.reduce((obj, d, i) => {\n      obj[this._nodeGroupBy ? this._nodeGroupBy[this._drawDepth](d, i) : this._id(d, i)] = d;\n      return obj;\n    }, {});\n\n    nodes = Array.from(new Set(Object.keys(data).concat(Object.keys(nodes)))).map((id, i) => {\n\n      const d = data[id],\n            n = nodes[id];\n\n      if (n === undefined) return false;\n\n      return {\n        __d3plus__: true,\n        data: d || n,\n        i, id,\n        fx: d !== undefined && this._x(d) !== undefined ? this._x(d) : this._x(n),\n        fy: d !== undefined && this._y(d) !== undefined ? this._y(d) : this._y(n),\n        node: n,\n        r: this._size ? d !== undefined && this._size(d) !== undefined ? this._size(d) : this._size(n) : this._sizeMin,\n        shape: d !== undefined && this._shape(d) !== undefined ? this._shape(d) : this._shape(n)\n      };\n\n    }).filter(n => n);\n\n    const xExtent = extent(nodes.map(n => n.fx)),\n          yExtent = extent(nodes.map(n => n.fy));\n\n    const x = scales.scaleLinear().domain(xExtent).range([0, width]),\n          y = scales.scaleLinear().domain(yExtent).range([0, height]);\n\n    const nodeRatio = (xExtent[1] - xExtent[0]) / (yExtent[1] - yExtent[0]),\n          screenRatio = width / height;\n\n    if (nodeRatio > screenRatio) {\n      const h = height * screenRatio / nodeRatio;\n      y.range([(height - h) / 2, height - (height - h) / 2]);\n    }\n    else {\n      const w = width * nodeRatio / screenRatio;\n      x.range([(width - w) / 2, width - (width - w) / 2]);\n    }\n\n    nodes.forEach(n => {\n      n.x = x(n.fx);\n      n.y = y(n.fy);\n    });\n\n    const rExtent = extent(nodes.map(n => n.r));\n    let rMax = this._sizeMax || min(\n      merge(nodes\n        .map(n1 => nodes\n          .map(n2 => n1 === n2 ? null : shapes.pointDistance([n1.x, n1.y], [n2.x, n2.y]))\n        )\n      )\n    ) / 2;\n\n    const r = scales[`scale${this._sizeScale.charAt(0).toUpperCase()}${this._sizeScale.slice(1)}`]()\n                .domain(rExtent).range([rExtent[0] === rExtent[1] ? rMax : min([rMax / 2, this._sizeMin]), rMax]),\n          xDomain = x.domain(),\n          yDomain = y.domain();\n\n    const xOldSize = xDomain[1] - xDomain[0],\n          yOldSize = yDomain[1] - yDomain[0];\n\n    nodes.forEach(n => {\n      const size = r(n.r);\n      if (xDomain[0] > x.invert(n.x - size)) xDomain[0] = x.invert(n.x - size);\n      if (xDomain[1] < x.invert(n.x + size)) xDomain[1] = x.invert(n.x + size);\n      if (yDomain[0] > y.invert(n.y - size)) yDomain[0] = y.invert(n.y - size);\n      if (yDomain[1] < y.invert(n.y + size)) yDomain[1] = y.invert(n.y + size);\n    });\n\n    const xNewSize = xDomain[1] - xDomain[0],\n          yNewSize = yDomain[1] - yDomain[0];\n\n    rMax *= min([xOldSize / xNewSize, yOldSize / yNewSize]);\n    r.range([rExtent[0] === rExtent[1] ? rMax : min([rMax / 2, this._sizeMin]), rMax]);\n    x.domain(xDomain);\n    y.domain(yDomain);\n\n    nodes.forEach(n => {\n      n.x = x(n.fx);\n      n.fx = n.x;\n      n.y = y(n.fy);\n      n.fy = n.y;\n      n.r = r(n.r);\n      n.width = n.r * 2;\n      n.height = n.r * 2;\n    });\n\n    const nodeLookup = this._nodeLookup = nodes.reduce((obj, d) => {\n      obj[d.id] = d;\n      return obj;\n    }, {});\n\n    // forceSimulation(nodes)\n    //   .on(\"tick\", () => this._shapes.forEach(s => s.render()));\n\n    const nodeIndices = nodes.map(n => n.node);\n    const links = this._links.map(l => ({\n      source: typeof l.source === \"number\"\n        ? nodes[nodeIndices.indexOf(this._nodes[l.source])]\n        : nodeLookup[l.source.id],\n      target: typeof l.target === \"number\"\n        ? nodes[nodeIndices.indexOf(this._nodes[l.target])]\n        : nodeLookup[l.target.id]\n    }));\n\n    this._linkLookup = links.reduce((obj, d) => {\n      if (!obj[d.source.id]) obj[d.source.id] = [];\n      obj[d.source.id].push(d.target);\n      if (!obj[d.target.id]) obj[d.target.id] = [];\n      obj[d.target.id].push(d.source);\n      return obj;\n    }, {});\n\n    this._container = this._select.selectAll(\"svg.d3plus-network\").data([0]);\n\n    this._container = this._container.enter().append(\"svg\")\n        .attr(\"class\", \"d3plus-network\")\n        .attr(\"opacity\", 0)\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .attr(\"x\", this._margin.left)\n        .attr(\"y\", this._margin.top)\n        .style(\"background-color\", \"transparent\")\n      .merge(this._container);\n\n    this._container.transition(this._transition)\n      .attr(\"opacity\", 1)\n      .attr(\"width\", width)\n      .attr(\"height\", height)\n      .attr(\"x\", this._margin.left)\n      .attr(\"y\", this._margin.top);\n\n    const hitArea = this._container.selectAll(\"rect.d3plus-network-hitArea\").data([0]);\n    hitArea.enter().append(\"rect\")\n        .attr(\"class\", \"d3plus-network-hitArea\")\n      .merge(hitArea)\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .attr(\"fill\", \"transparent\")\n        .on(\"click\", () => {\n          if (this._focus) {\n            this.active(false);\n            this._focus = undefined;\n            this._zoomToBounds(null);\n          }\n        });\n\n    this._zoomGroup = this._container.selectAll(\"g.d3plus-network-zoomGroup\").data([0]);\n    const parent = this._zoomGroup = this._zoomGroup.enter().append(\"g\")\n        .attr(\"class\", \"d3plus-network-zoomGroup\")\n      .merge(this._zoomGroup);\n\n    this._shapes.push(new shapes.Path()\n      .config(this._shapeConfig)\n      .config(this._shapeConfig.Path)\n      .d(d => `M${d.source.x},${d.source.y} ${d.target.x},${d.target.y}`)\n      .data(links)\n      .select(elem(\"g.d3plus-network-links\", {parent, transition, enter: {transform}, update: {transform}}).node())\n      .render());\n\n    const shapeConfig = {\n      label: d => nodes.length <= this._labelCutoff || (this._hover && this._hover(d) || this._active && this._active(d)) ? this._drawLabel(d.data || d.node, d.i) : false,\n      select: elem(\"g.d3plus-network-nodes\", {parent, transition, enter: {transform}, update: {transform}}).node()\n    };\n\n    nest().key(d => d.shape).entries(nodes).forEach(d => {\n      this._shapes.push(new shapes[d.key]()\n        .config(configPrep.bind(this)(this._shapeConfig, \"shape\", d.key))\n        .config(shapeConfig)\n        .config(shapeConfig[d.key] || {})\n        .data(d.values)\n        .render());\n    });\n\n    return this;\n\n  }\n\n  /**\n      @memberof Network\n      @desc Defines the maximum number of nodes that allow all labels to be shown. When the number of nodes is over this amount, labels will only be shown on hover and click.\n      @param {Number} *value* = 100\n      @chainable\n  */\n  labelCutoff(_) {\n    return arguments.length ? (this._labelCutoff = _, this) : this._labelCutoff;\n  }\n\n  /**\n      @memberof Network\n      @desc A predefined *Array* of edges that connect each object passed to the [node](#Network.node) method. The `source` and `target` keys in each link need to map to the nodes in one of three ways:\n1. The index of the node in the nodes array (as in [this](http://d3plus.org/examples/d3plus-network/getting-started/) example).\n2. The actual node *Object* itself.\n3. A *String* value matching the `id` of the node.\n\nThe value passed should either be an *Array* of data or a *String* representing a filepath or URL to be loaded. An optional formatting function can be passed as a second argument to this method. This custom function will be passed the data that has been loaded, as long as there are no errors. This function should return the final links *Array*.\n      @param {Array|String} *links* = []\n      @param {Function} [*formatter*]\n      @chainable\n  */\n  links(_, f) {\n    if (arguments.length) {\n      const prev = this._queue.find(q => q[3] === \"links\");\n      const d = [load.bind(this), _, f, \"links\"];\n      if (prev) this._queue[this._queue.indexOf(prev)] = d;\n      else this._queue.push(d);\n      return this;\n    }\n    return this._links;\n  }\n\n  /**\n      @memberof Network\n      @desc If *value* is specified, sets the node group accessor(s) to the specified string, function, or array of values and returns the current class instance. This method overrides the default .groupBy() function from being used with the data passed to .nodes(). If *value* is not specified, returns the current node group accessor.\n      @param {String|Function|Array} [*value* = undefined]\n      @chainable\n  */\n  nodeGroupBy(_) {\n    if (!arguments.length) return this._nodeGroupBy;\n    if (!(_ instanceof Array)) _ = [_];\n    return this._nodeGroupBy = _.map(k => {\n      if (typeof k === \"function\") return k;\n      else {\n        if (!this._aggs[k]) {\n          this._aggs[k] = a => {\n            const v = Array.from(new Set(a));\n            return v.length === 1 ? v[0] : v;\n          };\n        }\n        return accessor(k);\n      }\n    }), this;\n  }\n\n  /**\n      @memberof Network\n      @desc The list of nodes to be used for drawing the network. The value passed should either be an *Array* of data or a *String* representing a filepath or URL to be loaded.\n\nAdditionally, a custom formatting function can be passed as a second argument to this method. This custom function will be passed the data that has been loaded, as long as there are no errors. This function should return the final node *Array*.\n      @param {Array|String} *nodes* = []\n      @param {Function} [*formatter*]\n      @chainable\n  */\n  nodes(_, f) {\n    if (arguments.length) {\n      const prev = this._queue.find(q => q[3] === \"nodes\");\n      const d = [load.bind(this), _, f, \"nodes\"];\n      if (prev) this._queue[this._queue.indexOf(prev)] = d;\n      else this._queue.push(d);\n      return this;\n    }\n    return this._nodes;\n  }\n\n  /**\n      @memberof Network\n      @desc If *value* is specified, sets the size accessor to the specified function or data key and returns the current class instance. If *value* is not specified, returns the current size accessor.\n      @param {Function|String} [*value*]\n      @chainable\n  */\n  size(_) {\n    return arguments.length ? (this._size = typeof _ === \"function\" || !_ ? _ : accessor(_), this) : this._size;\n  }\n\n  /**\n      @memberof Network\n      @desc If *value* is specified, sets the size scale maximum to the specified number and returns the current class instance. If *value* is not specified, returns the current size scale maximum. By default, the maximum size is determined by half the distance of the two closest nodes.\n      @param {Number} [*value*]\n      @chainable\n  */\n  sizeMax(_) {\n    return arguments.length ? (this._sizeMax = _, this) : this._sizeMax;\n  }\n\n  /**\n      @memberof Network\n      @desc If *value* is specified, sets the size scale minimum to the specified number and returns the current class instance. If *value* is not specified, returns the current size scale minimum.\n      @param {Number} [*value* = 5]\n      @chainable\n  */\n  sizeMin(_) {\n    return arguments.length ? (this._sizeMin = _, this) : this._sizeMin;\n  }\n\n  /**\n      @memberof Network\n      @desc If *value* is specified, sets the size scale to the specified string and returns the current class instance. If *value* is not specified, returns the current size scale.\n      @param {String} [*value* = \"sqrt\"]\n      @chainable\n  */\n  sizeScale(_) {\n    return arguments.length ? (this._sizeScale = _, this) : this._sizeScale;\n  }\n\n  /**\n      @memberof Network\n      @desc If *value* is specified, sets the x accessor to the specified function or string matching a key in the data and returns the current class instance. The data passed to .data() takes priority over the .nodes() data array. If *value* is not specified, returns the current x accessor. By default, the x and y positions are determined dynamically based on default force layout properties.\n      @param {Function|String} [*value*]\n      @chainable\n  */\n  x(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._x = _;\n      else {\n        this._x = accessor(_);\n        if (!this._aggs[_]) this._aggs[_] = a => mean(a);\n      }\n      return this;\n    }\n    else return this._x;\n  }\n\n  /**\n      @memberof Network\n      @desc If *value* is specified, sets the y accessor to the specified function or string matching a key in the data and returns the current class instance. The data passed to .data() takes priority over the .nodes() data array. If *value* is not specified, returns the current y accessor. By default, the x and y positions are determined dynamically based on default force layout properties.\n      @param {Function|String} [*value*]\n      @chainable\n  */\n  y(_) {\n    if (arguments.length) {\n      if (typeof _ === \"function\") this._y = _;\n      else {\n        this._y = accessor(_);\n        if (!this._aggs[_]) this._aggs[_] = a => mean(a);\n      }\n      return this;\n    }\n    else return this._y;\n  }\n\n}\n"],"names":["super","this","const","let"],"mappings":"AAAA;;;;;AAKA,QAAQ,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,KAAK,OAAO,UAAU,CAAC;AAClD,QAAQ,IAAI,OAAO,eAAe,CAAC;;AAEnC,OAAO,KAAK,MAAM,MAAM,UAAU,CAAC;AACnC,QAAQ,aAAa,OAAO,SAAS,CAAC;;AAEtC,QAAQ,QAAQ,EAAE,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,OAAO,eAAe,CAAC;AAC3E,OAAO,KAAK,MAAM,MAAM,cAAc,CAAC;AACvC,QAAQ,QAAQ,IAAI,IAAI,EAAE,GAAG,OAAO,YAAY,CAAC;;;;;;;AAOjD,AAAe,IAAM,OAAO,GAAY;EAOtC,gBAAW,GAAG;;AAAC;;IAEbA,QAAK,KAAC,CAAC,CAAC;IACR,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;IACxB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;IACjB,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;IAC5B,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;IACjB,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,YAAG,CAAC,CAAC,EAAE,CAAC,EAAE,AAAG;;MAElCC,MAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC;;MAErC,IAAIA,MAAI,CAAC,MAAM,IAAIA,MAAI,CAAC,UAAU,IAAIA,MAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;;QAE9D,IAAIA,MAAI,CAAC,MAAM,IAAIA,MAAI,CAAC,MAAM,KAAK,CAAC,CAAC,EAAE,EAAE;;UAEvCA,MAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;UACnBA,MAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAACA,MAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;UAErCA,MAAI,CAAC,MAAM,GAAG,SAAS,CAAC;UACxBA,MAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;;SAE1B;aACI;;UAEHA,MAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;;UAElBC,GAAK,CAAC,EAAE,GAAGD,MAAI,CAAC,YAAY,IAAIA,MAAI,CAAC,YAAY,CAACA,MAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,MAAI,CAAC,YAAY,CAACA,MAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;gBAC9H,KAAK,GAAGA,MAAI,CAAC,WAAW,CAAC,EAAE,CAAC;gBAC5B,IAAI,GAAGA,MAAI,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;;UAElCC,GAAK,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;UAC5BC,GAAG,CAAC,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;cAC5C,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;;UAEjD,KAAK,CAAC,OAAO,WAAC,EAAC,CAAC,AAAG;YACjB,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACrB,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;YACnD,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;YACnD,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;YACnD,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;WACpD,CAAC,CAAC;;UAEHF,MAAI,CAAC,MAAM,UAAC,CAAC,CAAC,EAAE,CAAC,EAAE,AAAG;YACpB,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,IAAE,OAAO,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,IAAI,CAAC,CAAC,MAAM,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,GAAC;mBAC/E,OAAO,SAAS,CAAC,QAAQ,CAACA,MAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAACA,MAAI,CAAC,UAAU,CAAC,CAAC,GAAC;WAClE,CAAC,CAAC;;UAEHA,MAAI,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC;UACnBC,GAAK,CAAC,CAAC,GAAG,aAAa,CAACD,MAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;UAChD,OAAO,GAAG,OAAO,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAC,CAAC,CAAC;UAC1C,OAAO,GAAG,OAAO,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAC,CAAC,CAAC;UAC1CA,MAAI,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;SAE1E;;OAEF;;KAEF,CAAC;IACF,IAAI,CAAC,GAAG,CAAC,cAAc,CAAC,YAAG,CAAC,CAAC,EAAE,CAAC,EAAE,AAAG;;MAEnCC,GAAK,CAAC,GAAG,GAAGD,MAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACxBE,GAAG,CAAC,EAAE,GAAGF,MAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;MACtB,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;;MAEvB,IAAIA,MAAI,CAAC,MAAM,IAAIA,MAAI,CAAC,UAAU,IAAIA,MAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;;QAE9D,IAAIA,MAAI,CAAC,MAAM,IAAIA,MAAI,CAAC,MAAM,KAAK,GAAG,EAAE;;UAEtCA,MAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;UACnBA,MAAI,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,CAACA,MAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;UAErCA,MAAI,CAAC,MAAM,GAAG,SAAS,CAAC;UACxBA,MAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;;SAE1B;aACI;;UAEHA,MAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;;UAElBC,GAAK,CAAC,KAAK,GAAG,GAAG,CAAC,GAAG,WAAC,GAAE,CAAC,SAAGD,MAAI,CAAC,WAAW,CAAC,EAAE,IAAC,CAAC,CAAC;;UAElDC,GAAK,CAAC,SAAS,GAAG,CAAC,EAAE,CAAC,CAAC;UACvBC,GAAG,CAAC,OAAO,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;cAC5D,OAAO,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;UAEjE,KAAK,CAAC,OAAO,WAAC,EAAC,CAAC,AAAG;YACjB,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;YACrB,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;YACnD,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;YACnD,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;YACnD,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;WACpD,CAAC,CAAC;;UAEHF,MAAI,CAAC,MAAM,UAAC,CAAC,CAAC,EAAE,CAAC,EAAE,AAAG;YACpB,IAAI,CAAC,CAAC,MAAM,IAAI,CAAC,CAAC,MAAM,IAAE,OAAO,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,GAAC;iBAC/F;cACHC,GAAK,CAAC,KAAK,GAAGD,MAAI,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;cAC9B,OAAO,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;aACpD;WACF,CAAC,CAAC;;UAEHA,MAAI,CAAC,MAAM,GAAG,GAAG,CAAC;UAClBC,GAAK,CAAC,CAAC,GAAG,aAAa,CAACD,MAAI,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;UAChD,OAAO,GAAG,OAAO,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAC,CAAC,CAAC;UAC1C,OAAO,GAAG,OAAO,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAC,CAAC,CAAC;UAC1CA,MAAI,CAAC,aAAa,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;SAE1E;;QAEDA,MAAI,CAAC,GAAG,CAAC,kBAAkB,CAAC,CAAC,IAAI,CAACA,MAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;;OAE/C;;KAEF,CAAC;IACF,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;IAClB,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;IACzB,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,CAAC;IACjC,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE;MAC5C,SAAS,WAAE,CAAC,CAAC,EAAE,CAAC,EAAE,AAAG;QACnBC,GAAK,CAAC,SAAS,GAAGD,MAAI,CAAC,KAAK,GAAG,SAAKA,MAAI,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC;QAC5D,OAAO,OAAGA,MAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC,IAAG,SAAS,OAAG,CAAC;OAChD;MACD,WAAW,EAAE;QACX,QAAQ,EAAE,CAAC;QACX,OAAO,EAAE,CAAC;QACV,UAAU,EAAE,IAAI;QAChB,YAAY,EAAE,CAAC;QACf,UAAU,EAAE,QAAQ;QACpB,aAAa,EAAE,QAAQ;OACxB;MACD,IAAI,EAAE;QACJ,IAAI,EAAE,MAAM;QACZ,KAAK,EAAE,KAAK;QACZ,MAAM,EAAE,MAAM;QACd,WAAW,EAAE,CAAC;OACf;KACF,CAAC,CAAC;IACH,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;IACxB,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC;;IAExB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;;;;;;0CAEnB;;;;;;oBAMD,uBAAK,CAAC,QAAQ,EAAE;;AAAC;;IAEfD,aAAK,CAAC,UAAK,OAAC,QAAQ,CAAC,CAAC;;IAEtBE,GAAK,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM;UAC9D,SAAS,GAAG,gBAAa,IAAI,CAAC,OAAO,CAAC,KAAI,WAAK,IAAI,CAAC,OAAO,CAAC,IAAG,MAAG;UAClE,UAAU,GAAG,IAAI,CAAC,WAAW;UAC7B,KAAK,GAAG,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC;;IAEnEA,GAAK,CAAC,IAAI,GAAG,IAAI,CAAC,aAAa,CAAC,MAAM,UAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,AAAG;MACpD,GAAG,CAACD,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;MACxB,OAAO,GAAG,CAAC;KACZ,EAAE,EAAE,CAAC,CAAC;;IAEPE,GAAG,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,UAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,AAAG;MAC5C,GAAG,CAACF,MAAI,CAAC,YAAY,GAAGA,MAAI,CAAC,YAAY,CAACA,MAAI,CAAC,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,GAAGA,MAAI,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;MACvF,OAAO,GAAG,CAAC;KACZ,EAAE,EAAE,CAAC,CAAC;;IAEP,KAAK,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,UAAC,CAAC,EAAE,EAAE,CAAC,EAAE,AAAG;;MAEvFC,GAAK,CAAC,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;YACZ,CAAC,GAAG,KAAK,CAAC,EAAE,CAAC,CAAC;;MAEpB,IAAI,CAAC,KAAK,SAAS,IAAE,OAAO,KAAK,GAAC;;MAElC,OAAO;QACL,UAAU,EAAE,IAAI;QAChB,IAAI,EAAE,CAAC,IAAI,CAAC;WACZ,CAAC,MAAE,EAAE;QACL,EAAE,EAAE,CAAC,KAAK,SAAS,IAAID,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,SAAS,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC;QACzE,EAAE,EAAE,CAAC,KAAK,SAAS,IAAIA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,SAAS,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,EAAE,CAAC,CAAC,CAAC;QACzE,IAAI,EAAE,CAAC;QACP,CAAC,EAAEA,MAAI,CAAC,KAAK,GAAG,CAAC,KAAK,SAAS,IAAIA,MAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,SAAS,GAAGA,MAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,KAAK,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,QAAQ;QAC9G,KAAK,EAAE,CAAC,KAAK,SAAS,IAAIA,MAAI,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,SAAS,GAAGA,MAAI,CAAC,MAAM,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,MAAM,CAAC,CAAC,CAAC;OACzF,CAAC;;KAEH,CAAC,CAAC,MAAM,WAAC,EAAC,CAAC,SAAG,IAAC,CAAC,CAAC;;IAElBC,GAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,KAAE,CAAC,CAAC;UACtC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,KAAE,CAAC,CAAC,CAAC;;IAE7CA,GAAK,CAAC,CAAC,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;UAC1D,CAAC,GAAG,MAAM,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;;IAElEA,GAAK,CAAC,SAAS,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;UACjE,WAAW,GAAG,KAAK,GAAG,MAAM,CAAC;;IAEnC,IAAI,SAAS,GAAG,WAAW,EAAE;MAC3BA,GAAK,CAAC,CAAC,GAAG,MAAM,GAAG,WAAW,GAAG,SAAS,CAAC;MAC3C,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,MAAM,GAAG,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KACxD;SACI;MACHA,GAAK,CAAC,CAAC,GAAG,KAAK,GAAG,SAAS,GAAG,WAAW,CAAC;MAC1C,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;KACrD;;IAED,KAAK,CAAC,OAAO,WAAC,EAAC,CAAC,AAAG;MACjB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACd,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;KACf,CAAC,CAAC;;IAEHA,GAAK,CAAC,OAAO,GAAG,MAAM,CAAC,KAAK,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,IAAC,CAAC,CAAC,CAAC;IAC5CC,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,QAAQ,IAAI,GAAG;MAC7B,KAAK,CAAC,KAAK;SACR,GAAG,WAAC,GAAE,CAAC,SAAG,KAAK;WACb,GAAG,WAAC,GAAE,CAAC,SAAG,EAAE,KAAK,EAAE,GAAG,IAAI,GAAG,MAAM,CAAC,aAAa,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,IAAC,IAAC;SAChF;OACF;KACF,GAAG,CAAC,CAAC;;IAEND,GAAK,CAAC,CAAC,GAAG,MAAM,CAAC,YAAQ,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,KAAG,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;iBACnF,MAAM,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;UACvG,OAAO,GAAG,CAAC,CAAC,MAAM,EAAE;UACpB,OAAO,GAAG,CAAC,CAAC,MAAM,EAAE,CAAC;;IAE3BA,GAAK,CAAC,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;UAClC,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;;IAEzC,KAAK,CAAC,OAAO,WAAC,EAAC,CAAC,AAAG;MACjBA,GAAK,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpB,IAAI,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAC;MACzE,IAAI,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAC;MACzE,IAAI,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAC;MACzE,IAAI,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAE,OAAO,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,GAAC;KAC1E,CAAC,CAAC;;IAEHA,GAAK,CAAC,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC;UAClC,QAAQ,GAAG,OAAO,CAAC,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;;IAEzC,IAAI,IAAI,GAAG,CAAC,CAAC,QAAQ,GAAG,QAAQ,EAAE,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC;IACxD,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,OAAO,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,GAAG,CAAC,CAAC,IAAI,GAAG,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;IACnF,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;IAClB,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;;IAElB,KAAK,CAAC,OAAO,WAAC,EAAC,CAAC,AAAG;MACjB,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACd,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;MACd,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;MACX,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACb,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;MAClB,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;KACpB,CAAC,CAAC;;IAEHA,GAAK,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,UAAC,CAAC,GAAG,EAAE,CAAC,EAAE,AAAG;MAC7D,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,CAAC;MACd,OAAO,GAAG,CAAC;KACZ,EAAE,EAAE,CAAC,CAAC;;;;;IAKPA,GAAK,CAAC,WAAW,GAAG,KAAK,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,OAAI,CAAC,CAAC;IAC3CA,GAAK,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC;MAClC,MAAM,EAAE,OAAO,CAAC,CAAC,MAAM,KAAK,QAAQ;UAChC,KAAK,CAAC,WAAW,CAAC,OAAO,CAACD,MAAI,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;UACjD,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC;MAC3B,MAAM,EAAE,OAAO,CAAC,CAAC,MAAM,KAAK,QAAQ;UAChC,KAAK,CAAC,WAAW,CAAC,OAAO,CAACA,MAAI,CAAC,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;UACjD,UAAU,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC;KAC5B,IAAC,CAAC,CAAC;;IAEJ,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,MAAM,UAAC,CAAC,GAAG,EAAE,CAAC,EAAE,AAAG;MAC1C,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,IAAE,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,GAAC;MAC7C,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;MAChC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,IAAE,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,GAAG,EAAE,GAAC;MAC7C,GAAG,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;MAChC,OAAO,GAAG,CAAC;KACZ,EAAE,EAAE,CAAC,CAAC;;IAEP,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;IAEzE,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,KAAK,CAAC;SAClD,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC;SAC/B,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;SAClB,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;SACpB,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC;SACtB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;SAC5B,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;SAC3B,KAAK,CAAC,kBAAkB,EAAE,aAAa,CAAC;OAC1C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;IAE1B,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC;OACzC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC;OAClB,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;OACpB,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC;OACtB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC;OAC5B,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;;IAE/BC,GAAK,CAAC,OAAO,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnF,OAAO,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,MAAM,CAAC;SACzB,IAAI,CAAC,OAAO,EAAE,wBAAwB,CAAC;OACzC,KAAK,CAAC,OAAO,CAAC;SACZ,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC;SACpB,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC;SACtB,IAAI,CAAC,MAAM,EAAE,aAAa,CAAC;SAC3B,EAAE,CAAC,OAAO,WAAE,GAAG,AAAG;UACjB,IAAID,MAAI,CAAC,MAAM,EAAE;YACfA,MAAI,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YACnBA,MAAI,CAAC,MAAM,GAAG,SAAS,CAAC;YACxBA,MAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;WAC1B;SACF,CAAC,CAAC;;IAEP,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,4BAA4B,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACpFC,GAAK,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,KAAK,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC;SAC/D,IAAI,CAAC,OAAO,EAAE,0BAA0B,CAAC;OAC3C,KAAK,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;IAE1B,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,IAAI,EAAE;OAChC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;OACzB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC;OAC9B,CAAC,WAAC,EAAC,CAAC,SAAG,QAAI,CAAC,CAAC,MAAM,CAAC,EAAC,UAAI,CAAC,CAAC,MAAM,CAAC,EAAC,UAAI,CAAC,CAAC,MAAM,CAAC,EAAC,UAAI,CAAC,CAAC,MAAM,CAAC,CAAC,KAAE,CAAC;OAClE,IAAI,CAAC,KAAK,CAAC;OACX,MAAM,CAAC,IAAI,CAAC,wBAAwB,EAAE,SAAC,MAAM,cAAE,UAAU,EAAE,KAAK,EAAE,YAAC,SAAS,CAAC,EAAE,MAAM,EAAE,YAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,CAAC;OAC5G,MAAM,EAAE,CAAC,CAAC;;IAEbA,GAAK,CAAC,WAAW,GAAG;MAClB,KAAK,YAAE,EAAC,CAAC,SAAG,KAAK,CAAC,MAAM,IAAID,MAAI,CAAC,YAAY,IAAI,CAACA,MAAI,CAAC,MAAM,IAAIA,MAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAIA,MAAI,CAAC,OAAO,IAAIA,MAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,GAAGA,MAAI,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,QAAK;MACpK,MAAM,EAAE,IAAI,CAAC,wBAAwB,EAAE,SAAC,MAAM,cAAE,UAAU,EAAE,KAAK,EAAE,YAAC,SAAS,CAAC,EAAE,MAAM,EAAE,YAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;KAC7G,CAAC;;IAEF,IAAI,EAAE,CAAC,GAAG,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,QAAK,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,OAAO,WAAC,EAAC,CAAC,AAAG;MACnDA,MAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;SAClC,MAAM,CAAC,UAAU,CAAC,IAAI,CAACA,MAAI,CAAC,CAACA,MAAI,CAAC,YAAY,EAAE,OAAO,EAAE,CAAC,CAAC,GAAG,CAAC,CAAC;SAChE,MAAM,CAAC,WAAW,CAAC;SACnB,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;SAChC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC;SACd,MAAM,EAAE,CAAC,CAAC;KACd,CAAC,CAAC;;IAEH,OAAO,IAAI,CAAC;;IAEb;;;;;;;;oBAQD,mCAAW,CAAC,CAAC,EAAE;IACb,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;IAC7E;;;;;;;;;;;;;;oBAcD,uBAAK,CAAC,CAAC,EAAE,CAAC,EAAE;IACV,IAAI,SAAS,CAAC,MAAM,EAAE;MACpBC,GAAK,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,CAAC,CAAC,KAAK,UAAO,CAAC,CAAC;MACrDA,GAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;MAC3C,IAAI,IAAI,IAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAC;aAChD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,GAAC;MACzB,OAAO,IAAI,CAAC;KACb;IACD,OAAO,IAAI,CAAC,MAAM,CAAC;IACpB;;;;;;;;oBAQD,mCAAW,CAAC,CAAC,EAAE;;AAAC;IACd,IAAI,CAAC,SAAS,CAAC,MAAM,IAAE,OAAO,IAAI,CAAC,YAAY,GAAC;IAChD,IAAI,CAAC,CAAC,CAAC,YAAY,KAAK,CAAC,IAAE,CAAC,GAAG,CAAC,CAAC,CAAC,GAAC;IACnC,OAAO,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,GAAG,WAAC,EAAC,CAAC,AAAG;MACpC,IAAI,OAAO,CAAC,KAAK,UAAU,IAAE,OAAO,CAAC,GAAC;WACjC;QACH,IAAI,CAACD,MAAI,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE;UAClBA,MAAI,CAAC,KAAK,CAAC,CAAC,CAAC,aAAG,EAAC,CAAC,AAAG;YACnBC,GAAK,CAAC,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YACjC,OAAO,CAAC,CAAC,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;WAClC,CAAC;SACH;QACD,OAAO,QAAQ,CAAC,CAAC,CAAC,CAAC;OACpB;KACF,CAAC,EAAE,IAAI,CAAC;IACV;;;;;;;;;;;oBAWD,uBAAK,CAAC,CAAC,EAAE,CAAC,EAAE;IACV,IAAI,SAAS,CAAC,MAAM,EAAE;MACpBA,GAAK,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,WAAC,EAAC,CAAC,SAAG,CAAC,CAAC,CAAC,CAAC,KAAK,UAAO,CAAC,CAAC;MACrDA,GAAK,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;MAC3C,IAAI,IAAI,IAAE,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,GAAC;aAChD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,GAAC;MACzB,OAAO,IAAI,CAAC;KACb;IACD,OAAO,IAAI,CAAC,MAAM,CAAC;IACpB;;;;;;;;oBAQD,qBAAI,CAAC,CAAC,EAAE;IACN,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,UAAU,IAAI,CAAC,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;IAC7G;;;;;;;;oBAQD,2BAAO,CAAC,CAAC,EAAE;IACT,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;IACrE;;;;;;;;oBAQD,2BAAO,CAAC,CAAC,EAAE;IACT,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;IACrE;;;;;;;;oBAQD,+BAAS,CAAC,CAAC,EAAE;IACX,OAAO,SAAS,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,UAAU,GAAG,CAAC,EAAE,IAAI,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC;IACzE;;;;;;;;oBAQD,eAAC,CAAC,CAAC,EAAE;IACH,IAAI,SAAS,CAAC,MAAM,EAAE;MACpB,IAAI,OAAO,CAAC,KAAK,UAAU,IAAE,IAAI,CAAC,EAAE,GAAG,CAAC,GAAC;WACpC;QACH,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,aAAG,EAAC,CAAC,SAAG,IAAI,CAAC,CAAC,IAAC,GAAC;OAClD;MACD,OAAO,IAAI,CAAC;KACb;WACI,OAAO,IAAI,CAAC,EAAE,GAAC;IACrB;;;;;;;;oBAQD,eAAC,CAAC,CAAC,EAAE;IACH,IAAI,SAAS,CAAC,MAAM,EAAE;MACpB,IAAI,OAAO,CAAC,KAAK,UAAU,IAAE,IAAI,CAAC,EAAE,GAAG,CAAC,GAAC;WACpC;QACH,IAAI,CAAC,EAAE,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,IAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,aAAG,EAAC,CAAC,SAAG,IAAI,CAAC,CAAC,IAAC,GAAC;OAClD;MACD,OAAO,IAAI,CAAC;KACb;WACI,OAAO,IAAI,CAAC,EAAE,GAAC;GACrB;;;EArfkC;;uBAufpC;"}