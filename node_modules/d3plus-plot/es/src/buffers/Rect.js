import {default as ordinalBuffer} from "./ordinalBuffer";

export default function(ref) {
  var data = ref.data;
  var x = ref.x;
  var y = ref.y;
  var x2 = ref.x2;
  var y2 = ref.y2;
  var config = ref.config;

  var xKey = x2 ? "x2" : "x";
  var yKey = y2 ? "y2" : "y";

  var xD = x.domain().slice(),
      yD = y.domain().slice();

  var xR = x.range(),
        yR = y.range();

  if (!x.invert) { xD = ordinalBuffer(xD); }
  if (!y.invert) { yD = ordinalBuffer(yD); }

  data.forEach(function (d) {

    var h = config.height(d.data, d.i),
          w = config.width(d.data, d.i);

    if (x.invert && x(d[xKey]) - xR[0] < w) {
      var v = x.invert(x(d[xKey]) - w);
      if (v < xD[0]) { xD[0] = v; }
    }
    if (x.invert && xR[1] - x(d[xKey]) < w) {
      var v$1 = x.invert(x(d[xKey]) + w);
      if (v$1 > xD[1]) { xD[1] = v$1; }
    }

    if (y.invert && y(d[yKey]) - yR[0] < h) {
      var v$2 = y.invert(y(d[yKey]) - h);
      if (v$2 > yD[0]) { yD[0] = v$2; }
    }
    if (y.invert && yR[1] - y(d[yKey]) < h) {
      var v$3 = y.invert(y(d[yKey]) + h);
      if (v$3 < yD[1]) { yD[1] = v$3; }
    }

  });

  x.domain(xD);
  y.domain(yD);

  return [x, y];

}

//# sourceMappingURL=Rect.js.map