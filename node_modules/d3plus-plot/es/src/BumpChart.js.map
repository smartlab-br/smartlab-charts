{"version":3,"file":"BumpChart.js","sources":["../../src/BumpChart.js"],"sourcesContent":["import {constant} from \"d3plus-common\";\n\nimport {default as Plot} from \"./Plot\";\n\n/**\n    @class BumpChart\n    @extends Plot\n    @desc Creates a bump chart based on an array of data.\n    @example <caption>the equivalent of calling:</caption>\nnew d3plus.Plot()\n  .discrete(\"x\")\n  .shape(\"Line\")\n  .x(\"x\")\n  .y2(d => this._y(d))\n  .yConfig({\n    tickFormat: val => {\n      const data = this._formattedData;\n      const xDomain = this._xDomain;\n      const startData = data.filter(d => d.x === xDomain[0]);\n      const d = startData.find(d => d.y === val);\n      return this._drawLabel(d, d.i);\n     }\n   })\n  .y2Config({\n    tickFormat: val => {\n      const data = this._formattedData;\n      const xDomain = this._xDomain;\n      const endData = data.filter(d => d.x === xDomain[xDomain.length - 1]);\n      const d = endData.find(d => d.y === val);\n      return this._drawLabel(d, d.i);\n     }\n   })\n  .ySort((a, b) => b.y - a.y)\n  .y2Sort((a, b) => b.y - a.y)\n*/\nexport default class BumpChart extends Plot {\n\n  /**\n      @memberof BumpChart\n      @desc Invoked when creating a new class instance, and overrides any default parameters inherited from Plot.\n      @private\n  */\n  constructor() {\n\n    super();\n    this._discrete = \"x\";\n    this._shape = constant(\"Line\");\n    this.x(\"x\");\n    this.y2(d => this._y(d));\n\n    this.yConfig({\n      tickFormat: val => {\n        const data = this._formattedData;\n        const xMin = data[0].x instanceof Date ? data[0].x.getTime() : data[0].x;\n        const startData = data.filter(d => (d.x instanceof Date ? d.x.getTime() : d.x) === xMin);\n        const d = startData.find(d => d.y === val);\n        return d ? this._drawLabel(d, d.i) : \"\";\n      }\n    });\n    this.y2Config({\n      tickFormat: val => {\n        const data = this._formattedData;\n        const xMax = data[data.length - 1].x instanceof Date ? data[data.length - 1].x.getTime() : data[data.length - 1].x;\n        const endData = data.filter(d => (d.x instanceof Date ? d.x.getTime() : d.x) === xMax);\n        const d = endData.find(d => d.y === val);\n        return d ? this._drawLabel(d, d.i) : \"\";\n      }\n    });\n    this.ySort((a, b) => this._y(b) - this._y(a));\n    this.y2Sort((a, b) => this._y(b) - this._y(a));\n  }\n\n}\n"],"names":["super","this","const"],"mappings":"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"}