{"version":3,"file":"nest.js","sources":["../../src/nest.js"],"sourcesContent":["import {nest} from \"d3-collection\";\n\n/**\n    @function nest\n    @summary Extends the base behavior of d3.nest to allow for multiple depth levels.\n    @param {Array} *data* The data array to be nested.\n    @param {Array} *keys* An array of key accessors that signify each nest level.\n*/\nexport default function(data, keys) {\n\n  if (!(keys instanceof Array)) keys = [keys];\n\n  const dataNest = nest();\n  for (let i = 0; i < keys.length; i++) dataNest.key(keys[i]);\n  const nestedData = dataNest.entries(data);\n\n  return bubble(nestedData);\n\n}\n\n/**\n    Bubbles up values that do not nest to the furthest key.\n    @param {Array} *values* The \"values\" of a nest object.\n    @private\n*/\nfunction bubble(values) {\n\n  return values.map(d => {\n\n    if (d.key && d.values) {\n      if (d.values[0].key === \"undefined\") return d.values[0].values[0];\n      else d.values = bubble(d.values);\n    }\n\n    return d;\n\n  });\n\n}\n"],"names":["const","let"],"mappings":"AAAA,QAAQ,IAAI,OAAO,eAAe,CAAC;;;;;;;;AAQnC,eAAe,SAAS,IAAI,EAAE,IAAI,EAAE;;EAElC,IAAI,CAAC,CAAC,IAAI,YAAY,KAAK,CAAC,IAAE,IAAI,GAAG,CAAC,IAAI,CAAC,GAAC;;EAE5CA,GAAK,CAAC,QAAQ,GAAG,IAAI,EAAE,CAAC;EACxB,KAAKC,GAAG,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,IAAE,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,GAAC;EAC5DD,GAAK,CAAC,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;;EAE1C,OAAO,MAAM,CAAC,UAAU,CAAC,CAAC;;CAE3B;;;;;;;AAOD,SAAS,MAAM,CAAC,MAAM,EAAE;;EAEtB,OAAO,MAAM,CAAC,GAAG,WAAC,EAAC,CAAC,AAAG;;IAErB,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,MAAM,EAAE;MACrB,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,GAAG,KAAK,WAAW,IAAE,OAAO,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAC;aAC7D,CAAC,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,GAAC;KAClC;;IAED,OAAO,CAAC,CAAC;;GAEV,CAAC,CAAC;;CAEJ;"}